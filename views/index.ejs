<%- include('./template/header.ejs') %>

  <body>
    <%- include('./template/homeNav.ejs') %>
      <div>
            <div class='col-xs-8 col-xs-offset-2' style='height:90px;'>
              <div class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Sorted By: <span class="caret"></span></a>
                <ul class="dropdown-menu" style='border:none;border-radius:0px;'>
                  <li><a href="#">Recent Posts</a></li>
                  <li><a href="#">Most Popular</a></li>
                </ul>
              </div>
            </div>

            <% for(let i = 0; i < posts.length; i++){ %>
              <div class='panel panel-default col-xs-offset-2 col-xs-8 post-default' style='min-height:300px; background-color: rgba(44, 44, 44, 0.1);border-radius:15px;padding:15px;'>
                  <% if(posts[i].UserId === userId){ %>
                    <div style="position:relative;float:right;">                
                      <form action="/posts/delete" method="post">
                        <input style="display:none" name="id" type="text" value="<%= posts[i].id %>">
                        <button style="border:none;background:none;" type="submit">
                        <span class="icon-deleteiconbox"></span> delete
                        </button>
                      </form> 
                    </div>
                    <button onclick="edittextArea('<%=posts[i].id%>')" style="border:none;background:none;"><span style="font-size: 1.3em" class="icon-editiconbox"></span> edit</button>
                    <div class='panel panel-default post-default' style='padding:20px;margin-top:25px;min-height:180px; background-color: white;border-radius:15px;'>
                      <form id="form<%=posts[i].id%>" style="display:none;" action="/posts/update" method="post">
                          <input type="text" name="id" style="display:none" value = "<%=posts[i].id%>">
                          <textarea style='height:70px; width:100%;display:flex;border-radius:10px;' name="content" id="" cols="30" rows="10"><%- posts[i].cleanTag %></textarea>
                          <button class="btn btn-default" style='border-radius:5px;margin-top:10px' type="submit">submit</button>
                      </form>
                <% }else{ %>
                    <div class='panel panel-default post-default' style='padding:20px;margin-top:10px;min-height:180px; background-color: white;border-radius:15px;'>
                <% } %>
                <div id="display<%=posts[i].id%>" style='display:block'>
                    <%- posts[i].content %>
                  </div>
                </div>
                <!-- <p>1 like</p> -->
                <div style="width:100%;height:30px;">                
                    <form action="">
                        <input  type="text" style="border-radius:15px;border:1px rgba(0, 0, 0, 0.4) solid;width:80%;" placeholder=" add comment...">
                        <button type="submit" style='background:none;border-radius:5px;border:1px rgba(0, 0, 0, 0.4) solid;'>add comment</button>
                    </form>
                </div>
                <div id='hidecomment<%=posts[i].id%>' class='panel panel-default post-default' style='padding-top:5px;padding-left:15px;margin-top:10px;height:35px; background-color: rgba(255, 255, 255, 0.445);border-radius:20px;'>
                  <a onclick="showComment('<%=posts[i].id%>')" style='font-size:0.8em;'>View Comments (18)</a>
                </div>
                <div id='showcomment<%=posts[i].id%>' class='panel panel-default post-default' style='padding:15px;padding-top:5px;padding-left:15px;margin-top:10px;min-height:100px; background-color: rgba(255, 255, 255, 0.445);border-radius:20px;display:none;'>
                  <a onclick="hideComment('<%=posts[i].id%>')" style='font-size:0.8em;'>Hide Comments</a>
                  <div id='showcomment<%=posts[i].id%>' class='panel panel-default post-default' style='padding:30px;margin-top:10px;min-height:75px; background-color: rgba(255, 255, 255, 0.568);border-radius:10px;'>
                    <p style='font-size:0.8em;'>Comment1</p>
                  </div>
                  <div id='showcomment<%=posts[i].id%>' class='panel panel-default post-default' style='padding:30px;margin-top:10px;min-height:75px; background-color: rgba(255, 255, 255, 0.568);border-radius:10px;'>
                    <p style='font-size:0.8em;'>Comment2</p>
                  </div>
                  <div id='showcomment<%=posts[i].id%>' class='panel panel-default post-default' style='padding:30px;margin-top:10px;min-height:75px; background-color: rgba(255, 255, 255, 0.568);border-radius:10px;'>
                    <p style='font-size:0.8em;'>Comment3</p>
                  </div>
                </div>
              </div>
      </div>
      <% } %>
        <script>
        function edittextArea(id){
            let form = document.getElementById('form'+id).style.display
            let display = document.getElementById('display'+id).style.display
            if(form === 'none'){
                document.getElementById('form'+id).style.display = 'block'
                document.getElementById('display'+id).style.display = 'none'
            }else{
                document.getElementById('form'+id).style.display = 'none'
                document.getElementById('display'+id).style.display = 'block'
            }
        }
          function showComment(id) {
            document.getElementById('showcomment'+id).style.display = 'block'
            document.getElementById('hidecomment'+id).style.display = 'none'
          }

          function hideComment(id) {
            document.getElementById('hidecomment'+id).style.display = 'block'
            document.getElementById('showcomment'+id).style.display = 'none'
          }
        </script>
  </body>

  </html>
